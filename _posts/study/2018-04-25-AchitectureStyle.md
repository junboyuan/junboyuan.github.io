---
title: 4月25架构讨论纪要
layout: post
category : study
tagline: "Supporting tagline"
tags : [study]
---

### 目录
 * [切换背景](#1)
  
### 项目情况
   当前项目看起来很简单，分布式接受数据并进行一系列计算，最终展示在界面上。
   
   写流程： 数据接受层-->处理层-->DB
   
   读流程： DB-->Lucene-->Web
   
   当前架构约束：
   1. 需要支持扩容，可以弹性伸缩。
   2. 数据需要在某个维度进行有序。
   3. 无事件通知机制，只有Redis缓存
   
### 当前架构 
   1. 数据按需要有序的字段A进行切分
      
      切分算法：```Hash(A)%60```    ;60是个理论值 
   2. 切分后使用分布式选主在多个节点并行处理
   
      采用租约方式进行选主。
   3. 数据计算过程
   
      类似倒排索引，采用了roaringList的方式进行循环计算；
      
      其实类似流式计算的方式来执行计算逻辑；
   4. 数据库入库
    
      同步、异步入库，
   5. 缓存同步数据方式
      
      采用Version/E-Tag机制进行增量同步
   6. Lucene使用全量内存模式
   
      Lucene与数据库采用5的同步方式
### 架构难点 
 
    

#### 讨论点
 
  
 
#### 心得体会
 
 
### 感悟
 
 
#### 参考资料
   感谢互联网，感谢开源，感谢原创作者
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 

